{"version":3,"sources":["components/Canvas.js","App.js","index.js"],"names":["props","cvs","style","border","borderRadius","backgroundColor","id","ref","cvsRef","display","justifyContent","App","useRef","isDrawing","useState","ctx","setCtx","hasDrawn","setHasDrawn","isEraserMode","lastX","isEraser","setIsEraser","lastY","prediction","setPrediction","dateUrl","setDataUrl","useEffect","current","getContext","handleMouseDown","useCallback","e","offsetX","offsetY","stopDrawing","handleClear","clearRect","width","height","handleDownload","toDataURL","drawOnCanvas","event","beginPath","moveTo","lineTo","stroke","predictClicked","a","sendValue","fetch","method","headers","body","JSON","stringify","imagestring","response","json","respData","drawNormal","globalCompositeOperation","lineWidth","addEventListener","strokeStyle","lineJoin","lineCap","returnStyle","padding","window","innerHeight","predictionDiv","innerWidth","alignItems","flexDirection","paddingBottom","color","fontFamily","fontSize","marginRight","marginLeft","paddingTop","textAlign","fontWeight","Canvas","marginTop","cursor","textDecoration","download","onClick","href","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.89ff0643.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport default (props) => {\r\n  const cvs = (\r\n    <canvas\r\n      style={{\r\n        border: \"4px solid black\",\r\n        borderRadius: 0,\r\n        backgroundColor:'white'\r\n      }}\r\n      id=\"canvasboard\"\r\n      ref={props.cvsRef}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <section\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n      }}\r\n    >\r\n      {cvs}\r\n    </section>\r\n  );\r\n};\r\n","import React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport Canvas from \"./components/Canvas\";\nimport \"./App.css\";\n\nfunction App() {\n  const cvsRef = useRef();\n  const isDrawing = useRef(false);\n  const [ctx, setCtx] = useState(null);\n  const [hasDrawn, setHasDrawn] = useState(false);\n  const isEraserMode = useRef(false);\n  const lastX = useRef(0);\n  const [isEraser, setIsEraser] = useState(false);\n  const lastY = useRef(0);\n  // const [prediction, setPrediction] = useState(\"car\");\n  const [prediction, setPrediction] = useState(null);\n\n  const [dateUrl, setDataUrl] = useState(\"#\");\n\n  useEffect(() => {\n    setCtx(cvsRef?.current?.getContext(\"2d\"));\n  }, [cvsRef, ctx]);\n\n  const handleMouseDown = useCallback((e) => {\n    isDrawing.current = true;\n    [lastX.current, lastY.current] = [e.offsetX, e.offsetY];\n  }, []);\n\n  const stopDrawing = useCallback(() => {\n    isDrawing.current = false;\n  }, []);\n\n  const handleClear = useCallback(() => {\n    if (!ctx || !cvsRef || !cvsRef.current) {\n      return;\n    }\n    ctx.clearRect(0, 0, cvsRef.current.width, cvsRef.current.height);\n    setPrediction(null);\n    setHasDrawn(false);\n  }, [cvsRef, ctx]);\n\n  const handleDownload = useCallback(() => {\n    if (!cvsRef || !cvsRef.current) return;\n\n    setDataUrl(cvsRef.current.toDataURL(\"image/png\"));\n  }, [cvsRef]);\n\n  const drawOnCanvas = useCallback(\n    (event) => {\n      if (!ctx) {\n        return;\n      }\n      ctx.beginPath();\n      ctx.moveTo(lastX.current, lastY.current);\n      ctx.lineTo(event.offsetX, event.offsetY);\n      ctx.stroke();\n      setHasDrawn(true);\n      [lastX.current, lastY.current] = [event.offsetX, event.offsetY];\n    },\n    [ctx]\n  );\n  const handleEraserClicked = (e) => {\n    if (isEraser) {\n      return;\n    }\n    isEraserMode.current = true;\n    setIsEraser(true);\n  };\n  const handleBrushClicked = (e) => {\n    if (!isEraser) {\n      return;\n    }\n    isEraserMode.current = false;\n    setIsEraser(false);\n  };\n  const predictClicked = async () => {\n    if (!hasDrawn) {\n      return;\n    }\n    const sendValue = cvsRef.current.toDataURL();\n    const url = \"http://127.0.0.1:3333/predict\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        imagestring: sendValue,\n      }),\n    });\n    const respData = await response.json();\n    setPrediction(respData[\"predictedclass\"]);\n  };\n\n  const drawNormal = useCallback(\n    (e) => {\n      if (!isDrawing.current || !ctx) return;\n      if (isEraserMode.current) {\n        ctx.globalCompositeOperation = \"destination-out\";\n        ctx.lineWidth = 6;\n      } else {\n        ctx.globalCompositeOperation = \"source-over\";\n        ctx.lineWidth = 2.05;\n      }\n      drawOnCanvas(e);\n    },\n    [drawOnCanvas, ctx, isDrawing]\n  );\n\n  useEffect(() => {\n    if (cvsRef && cvsRef.current && ctx) {\n      cvsRef.current.addEventListener(\"mousedown\", handleMouseDown);\n      cvsRef.current.addEventListener(\"mousemove\", drawNormal);\n      cvsRef.current.addEventListener(\"mouseup\", stopDrawing);\n      cvsRef.current.addEventListener(\"mouseout\", stopDrawing);\n\n      cvsRef.current.width = 640;\n      cvsRef.current.height = 480;\n\n      ctx.strokeStyle = \"#000\";\n      ctx.lineJoin = \"round\";\n      ctx.lineCap = \"round\";\n      ctx.lineWidth = 2.05;\n    }\n  }, [cvsRef, ctx, drawNormal, handleMouseDown, stopDrawing]);\n\n  var returnStyle = {\n    backgroundColor: \"#eee\",\n    padding: 0,\n    height: window.innerHeight,\n  };\n\n  if (prediction) {\n    returnStyle = { backgroundColor: \"#eee\", padding: 0 };\n  }\n\n  const predictionDiv = prediction ? (\n    <div\n      style={{\n        height: 100,\n        width: window.innerWidth,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexDirection: \"row\",\n        paddingBottom:10,\n      }}\n    >\n      <div>\n        <text style={{ color: \"black\", fontFamily: \"cursive\", fontSize: 25 }}>\n          The Prediction is:\n        </text>\n      </div>\n      <div\n        style={{\n          padding: 15,\n          marginRight: 10,\n          marginLeft: 20,\n          borderRadius: 20,\n          backgroundColor: \"black\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        <text style={{ color: \"white\", fontFamily: \"cursive\", fontSize: 25 }}>\n          {prediction}\n        </text>\n      </div>\n    </div>\n  ) : null;\n\n  return (\n    <div style={returnStyle}>\n      <div\n        style={{\n          width: \"100%\",\n          paddingTop: 10,\n          paddingBottom: 10,\n          textAlign: \"center\",\n        }}\n      >\n        <p style={{ fontSize: 30, fontWeight: 200, fontFamily: \"cursive\" }}>\n          Welcome to our Canvas\n        </p>\n      </div>\n      <div>\n        <Canvas cvsRef={cvsRef} />\n      </div>\n      <div style={{ marginTop: 20, paddingBottom: 0 }}>\n        <nav>\n          <ul>\n            <li>\n              <a\n                style={{ cursor: \"pointer\", textDecoration: \"none\" }}\n                download=\"image.png\"\n                onClick={handleDownload}\n                href={dateUrl}\n              >\n                Save Image\n                <span></span>\n                <span></span>\n                <span></span>\n                <span></span>\n              </a>\n            </li>\n            <li onClick={handleClear} style={{ cursor: \"pointer\" }}>\n              Clear\n              <span></span>\n              <span></span>\n              <span></span>\n              <span></span>\n            </li>\n            <li onClick={predictClicked} style={{ cursor: \"pointer\" }}>\n              Predict\n              <span></span>\n              <span></span>\n              <span></span>\n              <span></span>\n            </li>\n            <li\n              onClick={handleEraserClicked}\n              style={{\n                cursor: !isEraser ? \"pointer\" : \"not-allowed\",\n                border: isEraser\n                  ? \"0.3em solid maroon\"\n                  : \"0.3em solid goldenrod\",\n              }}\n            >\n              Eraser\n              <span></span>\n              <span></span>\n              <span></span>\n              <span></span>\n            </li>\n            <li\n              onClick={handleBrushClicked}\n              style={{\n                cursor: isEraser ? \"pointer\" : \"not-allowed\",\n                border: !isEraser\n                  ? \"0.3em solid maroon\"\n                  : \"0.3em solid goldenrod\",\n              }}\n            >\n              Brush\n              <span></span>\n              <span></span>\n              <span></span>\n              <span></span>\n            </li>\n          </ul>\n        </nav>\n      </div>\n      <div>{predictionDiv}</div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}